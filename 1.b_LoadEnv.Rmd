---
title: "1.a_LoadEnv"
output: html_document
date: "2023-07-16"
---
```{r set the boundary}
#crop the environmental layers first based on localities of the occurrence points
extent=c(-175,-114,31,62)
```
```{r wrld_simpl}
data(wrld_simpl)
wrld_simpl.cp=crop(wrld_simpl,extent)
```
```{r Load WorldClim, cache=TRUE, warning=FALSE}
#Load Bioclimatic variables from WordClim.com
WorldClim=getData("worldclim", var="bio", res=2.5)
# rescale data using gain()
gain(WorldClim) <- 0.1
#WorldClim.new<-spTransform(WorldClim,crs)
WorldClim.cb=crop(WorldClim,extent)
names(WorldClim.cb)<-names(WorldClim)
```
```{r NALCMS landcover}
#load landcover type tif
landcover<-raster("input/land_cover_2020_30m_tif/NA_NALCMS_landcover_2020_30m.tif")
#reproject the entire layer
landcover.lonlat<-projectRaster(landcover,WorldClim,method="ngb")
landcover.lonlat.crop<-crop(landcover.lonlat,extent)
plot(landcover.lonlat.crop)
#add water type to all null category
landcover.sup<-reclassify(landcover.lonlat.crop,matrix(c(0,18),ncol=2))
plot(landcover.sup)
colortable(landcover.sup)<-colortable(landcover)
plot(landcover.sup)
```
```{r coastline and elevation}
#load other cropped raster 
coast.distance<-raster("input/GMT_intermediate_coast_distance_01d.tif")
coast.distance.crop=crop(coast.distance,extent)
coast.distance.lonlat<-projectRaster(coast.distance.crop,WorldClim.cb)

elev.crop<-get_elev_raster(WorldClim.cb,z=8)
elev.lonlat.crop<-projectRaster(elev.crop,WorldClim.cb)
```
```{r stack}
#stack the raster layers together
WorldClim.cb=stack(WorldClim.cb,landcover.sup,coast.distance.lonlat,elev.lonlat.crop)
names(WorldClim.cb)<-c(names(WorldClim),"landcover.type","d.coastline","elevation")
#test plot
plot(WorldClim.cb$d.coastline)
```
